apiVersion: networking.volcano.sh/v1alpha1
kind: ModelRoute
metadata:
  name: multi-backend-model
  namespace: dev
  labels:
    registry.volcano.sh/backend-name: ""
    registry.volcano.sh/managed-by: registry.volcano.sh
    registry.volcano.sh/model-name: multi-backend-model
    registry.volcano.sh/model-uid: randomUID
    registry.volcano.sh/revision: 7f95f7679c
  ownerReferences:
    - apiVersion: registry.volcano.sh/v1alpha1
      kind: Model
      name: multi-backend-model
      uid: randomUID
spec:
  modelName: "multi-backend-model"
  loraAdapters:
    - "lora-sql"
  rules:
    - name: "default"
      modelMatch:
        headers:
          users:
            exact: "john"
        body:
          model: "multi-backend-model"
      targetModels:
        - modelServerName: "multi-backend-model-backend1"
          weight: 40
        - modelServerName: "multi-backend-model-backend2"
          weight: 60
    - name: "lora-sql"
      modelMatch:
        headers:
          users:
            exact: "john"
        body:
          model: "lora-sql"
      targetModels:
        - modelServerName: "multi-backend-model-backend1"
          weight: 40
        - modelServerName: "multi-backend-model-backend2"
          weight: 60