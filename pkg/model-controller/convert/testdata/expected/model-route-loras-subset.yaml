apiVersion: networking.serving.volcano.sh/v1alpha1
kind: ModelRoute
metadata:
  name: multi-backend-model
  namespace: dev
  labels:
    workload.serving.volcano.sh/backend-name: ""
    workload.serving.volcano.sh/managed-by: workload.serving.volcano.sh
    workload.serving.volcano.sh/model-name: multi-backend-model
    workload.serving.volcano.sh/model-uid: randomUID
    workload.serving.volcano.sh/revision: 7b67c97bcb
  ownerReferences:
    - apiVersion: workload.serving.volcano.sh/v1alpha1
      kind: ModelBooster
      name: multi-backend-model
      uid: randomUID
spec:
  modelName: "multi-backend-model"
  loraAdapters:
    - "lora-sql-1"
    - "lora-sql-2"
  rules:
    - name: "default"
      modelMatch:
        headers:
          users:
            exact: "john"
        body:
          model: "multi-backend-model"
      targetModels:
        - modelServerName: "multi-backend-model-backend1"
          weight: 40
        - modelServerName: "multi-backend-model-backend2"
          weight: 60
    - name: "lora-sql-1"
      modelMatch:
        headers:
          users:
            exact: "john"
        body:
          model: "lora-sql-1"
      targetModels:
        - modelServerName: "multi-backend-model-backend1"
          weight: 40
    - name: "lora-sql-2"
      modelMatch:
        headers:
          users:
            exact: "john"
        body:
          model: "lora-sql-2"
      targetModels:
        - modelServerName: "multi-backend-model-backend1"
          weight: 40
        - modelServerName: "multi-backend-model-backend2"
          weight: 60
